const payLaterMessaging={init(){if("undefined"==typeof angelleye_pay_later_messaging)return!1;if("undefined"==typeof angelleye_paypal_sdk){console.log("Unable to render the PayLaterMessaging: PayPal lib not defined.");return}let e=angelleye_pay_later_messaging.amount,t=angelleye_pay_later_messaging.placements,a=Object.keys(t);for(let o=0;o<a.length;o++){let i=a[o],n=t[i],l=payLaterMessaging.getPayLaterStyleConfig(n);payLaterMessaging.render(e,i,l,n.css_selector)}payLaterMessaging.handleVariationProduct(),jQuery(".angelleye_ppcp_message_shortcode").each(function(){let t=jQuery(this).attr("data-key"),a=window[t];if(void 0!==a){let o=a.placement,i=payLaterMessaging.getPayLaterStyleConfig(a);payLaterMessaging.render(e,o,i,a.css_selector)}})},render(e,t,a,o){void 0===o&&(o=".angelleye_ppcp_message_cart"),jQuery(o).length&&jQuery(o).is(":visible")&&angelleye_paypal_sdk.Messages({amount:e,placement:t,style:a}).render(o)},getPayLaterStyleConfig(e){let t={layout:e.layout_type,logo:{},text:{}};return"text"===t.layout?(t.logo.type=e.text_layout_logo_type,["primary","alternative"].indexOf(e.text_layout_logo_type)>-1&&(t.logo.position=e.text_layout_logo_position),t.text.size=parseInt(e.text_layout_text_size),t.text.color=e.text_layout_text_color):(t.color=e.flex_layout_color,t.ratio=e.flex_layout_ratio),t},handleVariationProduct(){angelleyeOrder.isProductPage()&&jQuery(".variations_form").length&&jQuery(".variations_form").on("show_variation",function(){jQuery(".angelleye_ppcp_message_product").show()}).on("hide_variation",function(){jQuery(".angelleye_ppcp_message_product").hide()})}};jQuery,angelleyeLoadPayPalScript({url:angelleye_ppcp_manager.paypal_sdk_url,script_attributes:angelleye_ppcp_manager.paypal_sdk_attributes},function(){console.log("PayPal lib loaded, initialize pay later messaging."),payLaterMessaging.init(),(angelleyeOrder.isCartPage()||angelleyeOrder.isCheckoutPage())&&jQuery(document.body).on("updated_cart_totals payment_method_selected updated_checkout",function(){payLaterMessaging.init()})});
