const payLaterMessaging={init(){if("undefined"==typeof angelleye_pay_later_messaging)return!1;if("undefined"==typeof angelleye_paypal_sdk){console.log("Unable to render the PayLaterMessaging: PayPal lib not defined.");return}let e=angelleye_pay_later_messaging.amount,t=angelleye_pay_later_messaging.currencyCode,a=angelleye_pay_later_messaging.placements,o=Object.keys(a);for(let n=0;n<o.length;n++){let i=o[n],r=a[i],l=payLaterMessaging.getPayLaterStyleConfig(r);payLaterMessaging.render(e,t,i,l,r.css_selector)}payLaterMessaging.handleVariationProduct(),jQuery(".angelleye_ppcp_message_shortcode").each(function(){let a=jQuery(this).attr("data-key"),o=window[a];if(void 0!==o){let n=o.placement,i=payLaterMessaging.getPayLaterStyleConfig(o);payLaterMessaging.render(e,t,n,i,o.css_selector)}})},render(e,t,a,o,n){void 0===n&&(n=".angelleye_ppcp_message_cart"),jQuery(n).length&&jQuery(n).is(":visible")&&angelleye_paypal_sdk.Messages({amount:e,currency:t,placement:a,style:o}).render(n)},getPayLaterStyleConfig(e){let t={layout:e.layout_type,logo:{},text:{}};return"text"===t.layout?(t.logo.type=e.text_layout_logo_type,["primary","alternative"].indexOf(e.text_layout_logo_type)>-1&&(t.logo.position=e.text_layout_logo_position),t.text.size=parseInt(e.text_layout_text_size),t.text.color=e.text_layout_text_color):(t.color=e.flex_layout_color,t.ratio=e.flex_layout_ratio),t},handleVariationProduct(){angelleyeOrder.isProductPage()&&jQuery(".variations_form").length&&jQuery(".variations_form").on("show_variation",function(){jQuery(".angelleye_ppcp_message_product").show()}).on("hide_variation",function(){jQuery(".angelleye_ppcp_message_product").hide()})}};jQuery,angelleyeLoadPayPalScript({url:angelleye_ppcp_manager.paypal_sdk_url,script_attributes:angelleye_ppcp_manager.paypal_sdk_attributes},function(){console.log("PayPal lib loaded, initialize pay later messaging."),payLaterMessaging.init(),(angelleyeOrder.isCartPage()||angelleyeOrder.isCheckoutPage())&&jQuery(document.body).on("angelleye_cart_total_updated",async function(){let e=angelleyeOrder.getCartDetails();angelleye_pay_later_messaging.amount=e.totalAmount,angelleye_pay_later_messaging.currencyCode=e.currencyCode,payLaterMessaging.init()})});
