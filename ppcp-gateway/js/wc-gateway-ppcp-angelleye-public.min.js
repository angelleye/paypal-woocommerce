function initSmartButtons(){console.log("initSmartButtons");let e=jQuery;if("undefined"==typeof angelleye_ppcp_manager)return!1;let t=angelleyeOrder.getCheckoutSelectorCss();e(".variations_form").length&&e(".variations_form").on("show_variation",function(){e("#angelleye_ppcp_product").show()}).on("hide_variation",function(){e("#angelleye_ppcp_product").hide()}),e(document.body).hasClass("woocommerce-order-pay")&&e("#order_review").on("submit",function(n){return!0!==angelleyeOrder.isHostedFieldEligible()||(n.preventDefault(),!!e('input[name="wc-angelleye_ppcp_cc-payment-token"]').length&&"new"!==e('input[name="wc-angelleye_ppcp_cc-payment-token"]:checked').val()||(e(t).is(".paypal_cc_submiting")||(e(t).addClass("paypal_cc_submiting"),e(document.body).trigger("submit_paypal_cc_form")),!1))}),e(t).on("checkout_place_order_angelleye_ppcp_cc",function(n){return!0!==angelleyeOrder.isHostedFieldEligible()||(n.preventDefault(),!!e('input[name="wc-angelleye_ppcp_cc-payment-token"]').length&&"new"!==e('input[name="wc-angelleye_ppcp_cc-payment-token"]:checked').val()||(e(t).is(".paypal_cc_submiting")||(e(t).addClass("paypal_cc_submiting"),e(document.body).trigger("submit_paypal_cc_form")),!1))}),!1===angelleyeOrder.isCheckoutPage()&&angelleyeOrder.renderSmartButton(),"yes"===angelleye_ppcp_manager.is_pay_page&&(angelleyeOrder.hideShowPlaceOrderButton(),setTimeout(function(){angelleyeOrder.renderSmartButton(),!0===angelleyeOrder.isHostedFieldEligible()&&(0===e("#angelleye_ppcp_cc-card-number iframe").length&&e(angelleyeOrder.getCheckoutSelectorCss()).removeClass("HostedFields"),e(".checkout_cc_separator").show(),e("#wc-angelleye_ppcp-cc-form").show(),angelleyeOrder.renderHostedButtons())},300)),angelleyeOrder.updateCartTotalsInEnvironment(),angelleyeOrder.hooks.onPaymentCancellation(),angelleyeOrder.hooks.onPaymentMethodChange(),angelleyeOrder.hooks.onCartValueUpdate(),angelleyeOrder.triggerPendingEvents(),e(document.body).on("removed_coupon_in_checkout",function(){window.location.href=window.location.href})}jQuery,angelleyeOrder.hooks.handleRaceConditionOnWooHooks(),angelleyeLoadPayPalScript({url:angelleye_ppcp_manager.paypal_sdk_url,script_attributes:angelleye_ppcp_manager.paypal_sdk_attributes},function(){console.log("PayPal lib loaded, initialize buttons.");let e=[];if(angelleyeOrder.isApplePayEnabled()){let t=new Promise(e=>{console.log("apple sdk loaded"),e()});e.push({url:angelleye_ppcp_manager.apple_sdk_url,callback:t})}if(angelleyeOrder.isGooglePayEnabled()){let n=new Promise(e=>{console.log("google sdk loaded"),e()});e.push({url:angelleye_ppcp_manager.google_sdk_url,callback:n})}if(0===e.length)initSmartButtons();else{let o=[];for(let l=0;l<e.length;l++)o.push(e[l].callback);Promise.all(o).then(e=>{console.log("all libs loaded"),initSmartButtons()},e=>{console.log("An error occurred in loading the SDKs.")});for(let a=0;a<e.length;a++)angelleyeLoadPayPalScript(e[a],e[a].callback)}});
