function initExpressCheckout(){console.log("initExpressCheckout");let e=jQuery;if("undefined"==typeof angelleye_in_content_param)return!1;var t=function(){showHidePlaceOrderBtn(),e(".angelleye_pp_message_payment:eq(1)").hide(),e(".angelleye_smart_button_checkout_bottom").hide()},o=function(){if("undefined"==typeof angelleye_paypal_sdk)return console.log("PayPal Js not loaded"),!1},n=function(){showHidePlaceOrderBtn(),e(".angelleye_pp_message_payment:eq(1)").show(),e(".angelleye_smart_button_checkout_bottom").show()},a=function(){var o=e("#payment_method_paypal_express").is(":checked");e('input[name="wc-paypal_express-payment-token"]:checked').length>0?o&&e('input[name="wc-paypal_express-payment-token"]').length&&"new"===e('input[name="wc-paypal_express-payment-token"]:checked').val()?n():o&&e('input[name="wc-paypal_express-payment-token"]').length&&"new"!==e('input[name="wc-paypal_express-payment-token"]:checked').val()?t():o?n():t():o?n():t()};function l(){e(".angelleye_button_single").length>0&&(e(".angelleye_button_single").empty(),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.button_label,layout:angelleye_in_content_param.button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.button_height&&""!==angelleye_in_content_param.button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.button_height)),e(".angelleye_button_single").removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),e(".angelleye_button_single").addClass("angelleye_"+angelleye_in_content_param.button_layout+"_"+angelleye_in_content_param.button_size),o(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var t,o,n=e("[name='add-to-cart']").val();return e("<input>",{type:"hidden",name:"angelleye_ppcp-add-to-cart",value:n}).appendTo("form.cart"),t=e("form.cart").serialize(),o=angelleye_in_content_param.add_to_cart_ajaxurl,e("#wc-paypal_express-new-payment-method").is(":checked")&&(o+="&ec_save_to_account=true"),e.post(o,t).then(function(t){return e.post(t.url,{request_from:"JSv4"}).then(function(e){return e.token})})},onApprove:function(t,o){e(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={paymentToken:t.orderID,payerID:t.payerID,token:t.orderID,request_from:"JSv4"};e.post(angelleye_in_content_param.get_express_checkout_details+"&token="+t.orderID,n).then(function(e){window.location.href=e.url})},onCancel:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){e(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&e.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"button_click"})},onError:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_onerror"),window.location.href=angelleye_in_content_param.cancel_page}}).render(".angelleye_button_single"))}function r(){a();var t=[];"yes"==angelleye_in_content_param.is_checkout&&"yes"==angelleye_in_content_param.is_display_on_checkout&&t.push(".angelleye_smart_button_checkout_top"),"yes"==angelleye_in_content_param.is_cart&&("both"==angelleye_in_content_param.cart_button_possition?t.push(".angelleye_smart_button_top",".angelleye_smart_button_bottom"):"bottom"==angelleye_in_content_param.cart_button_possition?t.push(".angelleye_smart_button_bottom"):"top"==angelleye_in_content_param.cart_button_possition&&t.push(".angelleye_smart_button_top")),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.button_label,layout:angelleye_in_content_param.button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.button_height&&""!==angelleye_in_content_param.button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.button_height)),t.forEach(function(t){if(e(t).html(""),t.length>0&&e(t).length>0&&(e(t).removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),e(t).addClass("angelleye_"+angelleye_in_content_param.button_layout+"_"+angelleye_in_content_param.button_size),o(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var t;return t=angelleye_in_content_param.set_express_checkout,e("#wc-paypal_express-new-payment-method").is(":checked")?t+="&ec_save_to_account=true":e("#wc-paypal_express-new-payment-method_bottom").is(":checked")&&(t+="&ec_save_to_account=true"),e.post(t,{request_from:"JSv4"}).then(function(e){return e.token})},onApprove:function(t,o){e(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={paymentToken:t.orderID,payerID:t.payerID,token:t.orderID,request_from:"JSv4"};e.post(angelleye_in_content_param.get_express_checkout_details+"&token="+t.orderID,n).then(function(e){window.location.href=e.url})},onCancel:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){e(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&e.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"paypal_button_click"})},onError:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_onerror"),window.location.href=angelleye_in_content_param.cancel_page}}).render(t)),"angelleye_smart_button_checkout_top"===t)return!1})}function c(){var t=[];t.push(".angelleye_smart_button_mini"),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.mini_cart_button_label,layout:angelleye_in_content_param.mini_cart_button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.mini_cart_button_height&&""!==angelleye_in_content_param.mini_cart_button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.mini_cart_button_height)),t.forEach(function(t){e(t).html(""),t.length>0&&e(t).length>0&&(e(t).removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),e(t).addClass("angelleye_"+angelleye_in_content_param.button_layout+"_"+angelleye_in_content_param.button_size),o(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var t;return t=angelleye_in_content_param.set_express_checkout,e("#wc-paypal_express-new-payment-method").is(":checked")&&(t+="&ec_save_to_account=true"),e.post(t,{request_from:"JSv4"}).then(function(e){return e.token})},onApprove:function(t,o){e(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={paymentToken:t.orderID,payerID:t.payerID,token:t.orderID,request_from:"JSv4"};e.post(angelleye_in_content_param.get_express_checkout_details+"&token="+t.orderID,n).then(function(e){window.location.href=e.url})},onCancel:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){e(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&e.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"paypal_button_click"})},onError:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_onerror"),window.location.href=angelleye_in_content_param.cancel_page}}).render(t))})}function u(){var t=[];t.push(".angelleye_smart_button_wsc"),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.wsc_cart_button_label,layout:angelleye_in_content_param.wsc_cart_button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.wsc_cart_button_height&&""!==angelleye_in_content_param.wsc_cart_button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.wsc_cart_button_height)),t.forEach(function(t){e(t).html(""),t.length>0&&e(t).length>0&&(e(t).removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),e(t).addClass("angelleye_"+angelleye_in_content_param.wsc_cart_button_layout+"_"+angelleye_in_content_param.wsc_cart_button_size),o(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var t;return t=angelleye_in_content_param.set_express_checkout,e("#wc-paypal_express-new-payment-method").is(":checked")&&(t+="&ec_save_to_account=true"),e.post(t,{request_from:"JSv4"}).then(function(e){return e.token})},onApprove:function(t,o){e(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={paymentToken:t.orderID,payerID:t.payerID,token:t.orderID,request_from:"JSv4"};e.post(angelleye_in_content_param.get_express_checkout_details+"&token="+t.orderID,n).then(function(e){window.location.href=e.url})},onCancel:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){e(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&e.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"paypal_button_click"})},onError:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_onerror"),window.location.href=angelleye_in_content_param.cancel_page}}).render(t))})}"yes"!==angelleye_in_content_param.is_checkout&&r(),c(),l(),u(),e(document.body).on("updated_cart_totals updated_checkout",function(e){r()}),"no"===angelleye_in_content_param.checkout_page_disable_smart_button&&e(document.body).on("updated_cart_totals updated_checkout",function(t){var n;(n=[]).push(".angelleye_smart_button_checkout_bottom"),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.button_label,layout:angelleye_in_content_param.button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.button_height&&""!==angelleye_in_content_param.button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.button_height)),n.forEach(function(t){if(e(t).html(""),t.length>0&&e(t).length>0&&(e(t).removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),e(t).addClass("angelleye_"+angelleye_in_content_param.button_layout+"_"+angelleye_in_content_param.button_size),o(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var o=e(t).closest("form").add(e('<input type="hidden" name="request_from" /> ').attr("value","JSv4")).add(e('<input type="hidden" name="from_checkout" /> ').attr("value","yes")).serialize();return e.post(angelleye_in_content_param.set_express_checkout,o).then(function(e){return e.token})},onApprove:function(t,o){e(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={paymentToken:t.orderID,payerID:t.payerID,token:t.orderID,request_from:"JSv4"};e.post(angelleye_in_content_param.get_express_checkout_details+"&token="+t.orderID,n).then(function(t){"no"===angelleye_in_content_param.is_pre_checkout_offer?window.location.href=t.url:(e(".woocommerce").unblock(),e("form.checkout").triggerHandler("checkout_place_order"))})},onCancel:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){e(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&e.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"paypal_button_click"})},onError:function(t,o){e(".woocommerce").unblock(),e(document.body).trigger("angelleye_paypal_onerror"),window.location.href=window.location.href}}).render(t)),"angelleye_smart_button_checkout_bottom"===t)return!1})}),e(document.body).on("wc_fragments_loaded wc_fragments_refreshed",function(){var t=e(".angelleye_smart_button_mini");t.length&&(t.empty(),c());var o=e(".angelleye_button_single");o.length&&(o.empty(),l());var n=e(".angelleye_smart_button_wsc");n.length&&(n.empty(),u())}),"no"===angelleye_in_content_param.checkout_page_disable_smart_button&&(e(document.body).on("updated_cart_totals updated_checkout",function(e){a()}),e("form.checkout").on("click",'input[name="payment_method"]',function(){a()}),e("form.checkout").on("click",'input[name="wc-paypal_express-payment-token"]',function(){"new"===e(this).val()?n():"new"!==e(this).val()&&t()}))}jQuery,angelleyeLoadPayPalScript({url:angelleye_in_content_param.paypal_sdk_url,script_attributes:{"data-namespace":"angelleye_paypal_sdk"}},initExpressCheckout);