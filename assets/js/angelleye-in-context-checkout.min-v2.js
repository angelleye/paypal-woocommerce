jQuery(function(a){if("undefined"==typeof angelleye_in_content_param)return!1;function n(){a("#place_order").show(),a(".angelleye_pp_message_payment:eq(1)").hide(),a(".angelleye_smart_button_checkout_bottom").hide()}function t(){return"undefined"==typeof angelleye_paypal_sdk&&(console.log("PayPal Js not loaded"),0)}function o(){a("#place_order").hide(),a(".angelleye_pp_message_payment:eq(1)").show(),a(".angelleye_smart_button_checkout_bottom").show()}function l(){var e=a("#payment_method_paypal_express").is(":checked");(0<a('input[name="wc-paypal_express-payment-token"]:checked').length?e&&a('input[name="wc-paypal_express-payment-token"]').length&&"new"===a('input[name="wc-paypal_express-payment-token"]:checked').val()||(!e||!a('input[name="wc-paypal_express-payment-token"]').length||"new"===a('input[name="wc-paypal_express-payment-token"]:checked').val())&&e?o:n:e?o:n)()}function _(){0<a(".angelleye_button_single").length&&(a(".angelleye_button_single").empty(),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.button_label,layout:angelleye_in_content_param.button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.button_height&&""!==angelleye_in_content_param.button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.button_height)),a(".angelleye_button_single").removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),a(".angelleye_button_single").addClass("angelleye_"+angelleye_in_content_param.button_layout+"_"+angelleye_in_content_param.button_size),t(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var e,n=a("[name='add-to-cart']").val();return a("<input>",{type:"hidden",name:"angelleye_ppcp-add-to-cart",value:n}).appendTo("form.cart"),e=a("form.cart").serialize(),n=angelleye_in_content_param.add_to_cart_ajaxurl,a("#wc-paypal_express-new-payment-method").is(":checked")&&(n+="&ec_save_to_account=true"),a.post(n,e).then(function(e){return a.post(e.url,{request_from:"JSv4"}).then(function(e){return e.token})})},onApprove:function(e,n){a(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={paymentToken:e.orderID,payerID:e.payerID,token:e.orderID,request_from:"JSv4"};a.post(angelleye_in_content_param.get_express_checkout_details+"&token="+e.orderID,t).then(function(e){window.location.href=e.url})},onCancel:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){a(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&a.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"button_click"})},onError:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_onerror"),window.location.href=angelleye_in_content_param.cancel_page}}).render(".angelleye_button_single"))}function c(){var e=[];"yes"==angelleye_in_content_param.is_checkout&&"yes"==angelleye_in_content_param.is_display_on_checkout&&e.push(".angelleye_smart_button_checkout_top"),"yes"==angelleye_in_content_param.is_cart&&("both"==angelleye_in_content_param.cart_button_possition?e.push(".angelleye_smart_button_top",".angelleye_smart_button_bottom"):"bottom"==angelleye_in_content_param.cart_button_possition?e.push(".angelleye_smart_button_bottom"):"top"==angelleye_in_content_param.cart_button_possition&&e.push(".angelleye_smart_button_top")),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.button_label,layout:angelleye_in_content_param.button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.button_height&&""!==angelleye_in_content_param.button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.button_height)),e.forEach(function(e){if(a(e).html(""),0<e.length&&0<a(e).length&&(a(e).removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),a(e).addClass("angelleye_"+angelleye_in_content_param.button_layout+"_"+angelleye_in_content_param.button_size),t(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var e=angelleye_in_content_param.set_express_checkout;return(a("#wc-paypal_express-new-payment-method").is(":checked")||a("#wc-paypal_express-new-payment-method_bottom").is(":checked"))&&(e+="&ec_save_to_account=true"),a.post(e,{request_from:"JSv4"}).then(function(e){return e.token})},onApprove:function(e,n){a(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={paymentToken:e.orderID,payerID:e.payerID,token:e.orderID,request_from:"JSv4"};a.post(angelleye_in_content_param.get_express_checkout_details+"&token="+e.orderID,t).then(function(e){window.location.href=e.url})},onCancel:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){a(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&a.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"paypal_button_click"})},onError:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_onerror"),window.location.href=angelleye_in_content_param.cancel_page}}).render(e)),"angelleye_smart_button_checkout_top"===e)return!1})}function r(){var e=[];e.push(".angelleye_smart_button_mini"),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.mini_cart_button_label,layout:angelleye_in_content_param.mini_cart_button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.mini_cart_button_height&&""!==angelleye_in_content_param.mini_cart_button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.mini_cart_button_height)),e.forEach(function(e){a(e).html(""),0<e.length&&0<a(e).length&&(a(e).removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),a(e).addClass("angelleye_"+angelleye_in_content_param.button_layout+"_"+angelleye_in_content_param.button_size),t(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var e=angelleye_in_content_param.set_express_checkout;return a("#wc-paypal_express-new-payment-method").is(":checked")&&(e+="&ec_save_to_account=true"),a.post(e,{request_from:"JSv4"}).then(function(e){return e.token})},onApprove:function(e,n){a(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={paymentToken:e.orderID,payerID:e.payerID,token:e.orderID,request_from:"JSv4"};a.post(angelleye_in_content_param.get_express_checkout_details+"&token="+e.orderID,t).then(function(e){window.location.href=e.url})},onCancel:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){a(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&a.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"paypal_button_click"})},onError:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_onerror"),window.location.href=angelleye_in_content_param.cancel_page}}).render(e))})}function i(){var e=[];e.push(".angelleye_smart_button_wsc"),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.wsc_cart_button_label,layout:angelleye_in_content_param.wsc_cart_button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.wsc_cart_button_height&&""!==angelleye_in_content_param.wsc_cart_button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.wsc_cart_button_height)),e.forEach(function(e){a(e).html(""),0<e.length&&0<a(e).length&&(a(e).removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),a(e).addClass("angelleye_"+angelleye_in_content_param.wsc_cart_button_layout+"_"+angelleye_in_content_param.wsc_cart_button_size),t(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var e=angelleye_in_content_param.set_express_checkout;return a("#wc-paypal_express-new-payment-method").is(":checked")&&(e+="&ec_save_to_account=true"),a.post(e,{request_from:"JSv4"}).then(function(e){return e.token})},onApprove:function(e,n){a(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={paymentToken:e.orderID,payerID:e.payerID,token:e.orderID,request_from:"JSv4"};a.post(angelleye_in_content_param.get_express_checkout_details+"&token="+e.orderID,t).then(function(e){window.location.href=e.url})},onCancel:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){a(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&a.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"paypal_button_click"})},onError:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_onerror"),window.location.href=angelleye_in_content_param.cancel_page}}).render(e))})}"yes"!==angelleye_in_content_param.is_checkout&&c(),r(),_(),i(),a(document.body).on("updated_cart_totals updated_checkout",function(e){c()}),"no"===angelleye_in_content_param.checkout_page_disable_smart_button&&a(document.body).on("updated_cart_totals updated_checkout",function(e){var n;(n=[]).push(".angelleye_smart_button_checkout_bottom"),angelleye_cart_style_object={color:angelleye_in_content_param.button_color,shape:angelleye_in_content_param.button_shape,label:angelleye_in_content_param.button_label,layout:angelleye_in_content_param.button_layout,tagline:"true"===angelleye_in_content_param.button_tagline},void 0!==angelleye_in_content_param.button_height&&""!==angelleye_in_content_param.button_height&&(angelleye_cart_style_object.height=parseInt(angelleye_in_content_param.button_height)),n.forEach(function(n){if(a(n).html(""),0<n.length&&0<a(n).length&&(a(n).removeClass("angelleye_horizontal_small angelleye_horizontal_medium angelleye_horizontal_large angelleye_vertical_small angelleye_vertical_medium angelleye_vertical_large"),a(n).addClass("angelleye_"+angelleye_in_content_param.button_layout+"_"+angelleye_in_content_param.button_size),t(),angelleye_paypal_sdk.Buttons({style:angelleye_cart_style_object,createOrder:function(){var e=a(n).closest("form").add(a('<input type="hidden" name="request_from" /> ').attr("value","JSv4")).add(a('<input type="hidden" name="from_checkout" /> ').attr("value","yes")).serialize();return a.post(angelleye_in_content_param.set_express_checkout,e).then(function(e){return e.token})},onApprove:function(e,n){a(".woocommerce").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={paymentToken:e.orderID,payerID:e.payerID,token:e.orderID,request_from:"JSv4"};a.post(angelleye_in_content_param.get_express_checkout_details+"&token="+e.orderID,t).then(function(e){"no"===angelleye_in_content_param.is_pre_checkout_offer?window.location.href=e.url:(a(".woocommerce").unblock(),a("form.checkout").triggerHandler("checkout_place_order"))})},onCancel:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_oncancel"),window.location.href=window.location.href},onClick:function(){a(document.body).trigger("angelleye_paypal_onclick"),"yes"===angelleye_in_content_param.enable_google_analytics_click&&"undefined"!=typeof ga&&a.isFunction(ga)&&ga("send",{hitType:"event",eventCategory:"Checkout",eventAction:"paypal_button_click"})},onError:function(e,n){a(".woocommerce").unblock(),a(document.body).trigger("angelleye_paypal_onerror"),window.location.href=window.location.href}}).render(n)),"angelleye_smart_button_checkout_bottom"===n)return!1})}),a(document.body).on("wc_fragments_loaded wc_fragments_refreshed",function(){var e=a(".angelleye_smart_button_mini");e.length&&(e.empty(),r());e=a(".angelleye_button_single");e.length&&(e.empty(),_());e=a(".angelleye_smart_button_wsc");e.length&&(e.empty(),i())}),"no"===angelleye_in_content_param.checkout_page_disable_smart_button&&(a(document.body).on("updated_cart_totals updated_checkout",function(e){l()}),a("form.checkout").on("click",'input[name="payment_method"]',function(){l()}),a("form.checkout").on("click",'input[name="wc-paypal_express-payment-token"]',function(){"new"===a(this).val()?o():"new"!==a(this).val()&&n()}))});